(this["webpackJsonpstory-app-front"]=this["webpackJsonpstory-app-front"]||[]).push([[0],{168:function(e,t,a){e.exports=a(472)},172:function(e,t,a){},193:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},194:function(e,t,a){},472:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(12),l=a.n(o),s=(a(172),a(33)),c=a(5),i=a(34),u=a(23),m=a(35),d=a.n(m),h=a(51),p=a(53),v=a(27),b=a(28),y=a(31),f=a(30),E=a(11),g=a.n(E),S=function(e){return n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:e.name},e.label),n.a.createElement("input",{value:e.value,onChange:e.onChange,id:e.id,name:e.name,type:e.type,className:"form-control"}),e.error&&n.a.createElement("div",{className:"alert alert-danger"},e.error))},O=a(29),w=a.n(O),C=function(e){Object(y.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(v.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={account:{Email:"",Password:""},done:!1,signup:!1,errors:{}},e.schema={Email:g.a.string().required().label("Email").email({tlds:{allow:!1}}),Password:g.a.string().required().label("Password")},e.validate=function(){var t=g.a.validate(e.state.account,e.schema,{abortEarly:!1});if(console.log(t),!t.error)return null;var a,r={},n=Object(p.a)(t.error.details);try{for(n.s();!(a=n.n()).done;){var o=a.value;r[o.path[0]]=o.message}}catch(l){n.e(l)}finally{n.f()}return r},e.handleSubmit=function(){var t=Object(h.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),r=e.validate(),e.setState({errors:r||{}}),!r){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,w.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).URL+"login",e.state.account).then((function(t){e.setState({done:!0})})).catch((function(e){alert("Wrong credentials")}));case 7:console.log("Submitted");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.validateProperty=function(t){var a=t.name,r=t.value,n=Object(u.a)({},a,r),o=Object(u.a)({},a,e.schema[a]),l=g.a.validate(n,o);console.log(l);var s=l.error;return console.log(s),s?s.details[0].message:null},e.handleChange=function(t){var a=t.currentTarget,r=Object(i.a)({},e.state.errors),n=e.validateProperty(a);n?r[a.name]=n:delete r[a.name];var o=Object(i.a)({},e.state.account);o[a.name]=a.value,e.setState({account:o,errors:r||{}})},e.handleSignup=function(){e.setState({signup:!0})},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.state.account;return this.state.done?n.a.createElement(c.a,{push:!0,to:{pathname:"/allstory"}}):this.state.signup?n.a.createElement(c.a,{push:!0,to:{pathname:"/create"}}):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"container"},n.a.createElement("h1",null,"Login"),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement(S,{id:"Email",name:"Email",label:"E-Mail",type:"email",value:e.Email,onChange:this.handleChange,error:this.state.errors.Email}),n.a.createElement(S,{id:"Password",name:"Password",label:"Password",type:"Password",value:e.Password,onChange:this.handleChange,error:this.state.errors.Password}),n.a.createElement("button",{type:"submit",disabled:this.validate(),className:"btn btn-primary"},"Login"),n.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.handleSignup},"SignUp"))))}}]),a}(r.Component),j=(a(193),a(194),a(76),a(474)),T=a(475),P=function(){return n.a.createElement("div",{className:"container"},n.a.createElement(j.a,{bg:"dark",variant:"dark"},n.a.createElement(T.a,{className:"mr-auto"},n.a.createElement(T.a.Link,{href:"/allstory"},"All Stories"))))},k=function(e){Object(y.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(v.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={account:{Title:"",Story:""},done:!1,errors:{}},e.schema={Title:g.a.string().required().label("Title"),Story:g.a.string().required().label("Story")},e.validate=function(){var t=g.a.validate(e.state.account,e.schema,{abortEarly:!1});if(console.log(t),!t.error)return null;var a,r={},n=Object(p.a)(t.error.details);try{for(n.s();!(a=n.n()).done;){var o=a.value;r[o.path[0]]=o.message}}catch(l){n.e(l)}finally{n.f()}return r},e.handleSubmit=function(){var t=Object(h.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),r=e.validate(),e.setState({errors:r||{}}),!r){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,w.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).URL+"addstory",e.state.account).then((function(t){e.setState({done:!0})})).catch((function(e){e&&alert("Something went wrong")}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.validateProperty=function(t){var a=t.name,r=t.value,n=Object(u.a)({},a,r),o=Object(u.a)({},a,e.schema[a]),l=g.a.validate(n,o);console.log(l);var s=l.error;return console.log(s),s?s.details[0].message:null},e.handleChange=function(t){var a=t.currentTarget,r=Object(i.a)({},e.state.errors),n=e.validateProperty(a);n?r[a.name]=n:delete r[a.name];var o=Object(i.a)({},e.state.account);o[a.name]=a.value,e.setState({account:o,errors:r||{}})},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.state.account;return this.state.done?n.a.createElement(c.a,{push:!0,to:{pathname:"/allstory"}}):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"container"},n.a.createElement(P,null),n.a.createElement("h1",null,"Add Story"),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement(S,{id:"Title",name:"Title",label:"Title",type:"text",value:e.Title,onChange:this.handleChange,error:this.state.errors.Title}),n.a.createElement(S,{id:"Story",name:"Story",label:"Story",type:"text",value:e.Story,onChange:this.handleChange,error:this.state.errors.Story}),n.a.createElement("button",{type:"submit",disabled:this.validate(),className:"btn btn-primary"},"Add Story"))))}}]),a}(r.Component),N=(a(197),function(e){Object(y.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(v.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={Story:{_id:"",Title:"",Story:""},all:!1},e.handleClick=function(){e.setState({all:!0})},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props.id),w.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).URL+"story/".concat(this.props.match.params.id)).then((function(t){var a=t.data.Story;e.setState({Story:a})}))}},{key:"render",value:function(){return this.state.all?n.a.createElement(c.a,{push:!0,to:{pathname:"/allstory"}}):n.a.createElement("div",{className:"container"},n.a.createElement(P,null),n.a.createElement("h1",null,this.state.Story.Title),n.a.createElement("p",null,this.state.Story.Story))}}]),a}(r.Component)),_=a(476),D=function(e){Object(y.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(v.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={Storys:[],done:!1,show:!1,storyid:""},e.handleClick=function(){e.setState({done:!0})},e.showStory=function(t){console.log(t),e.setState({storyid:t,show:!0},(function(){console.log(e.state.storyid)}))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this;w.a.get("http://127.0.0.1:5000/allstory").then((function(t){console.log(t.data.Story);var a=t.data.Story;e.setState({Storys:a}),console.log(a[0]._id)}))}},{key:"render",value:function(){var e=this;return this.state.done?n.a.createElement(c.a,{push:!0,to:{pathname:"/addstory"}}):this.state.show?n.a.createElement("div",null,n.a.createElement(c.a,{push:!0,to:{pathname:"/storyid/".concat(this.state.storyid)}}),";"):n.a.createElement("div",{className:"container"},n.a.createElement(P,null),n.a.createElement(_.a,null,this.state.Storys.map((function(t){return n.a.createElement(_.a.Item,{action:!0,href:"",onClick:function(){return e.showStory(t._id)}},t.Title)}))),n.a.createElement("button",{className:"btn btn-primary",onClick:this.handleClick}," Add Story"))}}]),a}(r.Component),x=function(e){Object(y.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(v.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={account:{Name:"",Email:"",Password:""},done:!1,errors:{}},e.schema={Name:g.a.string().required().label("Name"),Email:g.a.string().required().label("Email").email({tlds:{allow:!1}}),Password:g.a.string().required().label("Password")},e.validate=function(){var t=g.a.validate(e.state.account,e.schema,{abortEarly:!1});if(console.log(t),!t.error)return null;var a,r={},n=Object(p.a)(t.error.details);try{for(n.s();!(a=n.n()).done;){var o=a.value;r[o.path[0]]=o.message}}catch(l){n.e(l)}finally{n.f()}return r},e.handleSubmit=function(){var t=Object(h.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),r=e.validate(),e.setState({errors:r||{}}),!r){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,w.a.post("https://storyapp-ankur.herokuapp.com/user",e.state.account).then((function(t){e.setState({done:!0})})).catch((function(e){e&&alert("Already registered email id")}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.validateProperty=function(t){var a=t.name,r=t.value,n=Object(u.a)({},a,r),o=Object(u.a)({},a,e.schema[a]),l=g.a.validate(n,o);console.log(l);var s=l.error;return console.log(s),s?s.details[0].message:null},e.handleChange=function(t){var a=t.currentTarget,r=Object(i.a)({},e.state.errors),n=e.validateProperty(a);n?r[a.name]=n:delete r[a.name];var o=Object(i.a)({},e.state.account);o[a.name]=a.value,e.setState({account:o,errors:r||{}})},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.state.account;return!0===this.state.done?n.a.createElement(c.a,{push:!0,to:{pathname:"/allstory"}}):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"container"},n.a.createElement("h1",null,"Create Your Account"),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement(S,{name:"Name",label:"Name",type:"text",value:e.Name,onChange:this.handleChange,error:this.state.errors.Name}),n.a.createElement(S,{name:"Email",label:"E-Mail",type:"email",value:e.Email,onChange:this.handleChange,error:this.state.errors.Email}),n.a.createElement(S,{id:"password",name:"Password",label:"Password",type:"password",value:e.Password,onChange:this.handleChange,error:this.state.errors.Password}),n.a.createElement("button",{type:"submit",disabled:this.validate(),className:"btn btn-primary"},"Create Account"))))}}]),a}(r.Component);var A=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(c.d,null,n.a.createElement(c.b,{path:"/login",component:C}),n.a.createElement(c.b,{path:"/create",component:x}),n.a.createElement(c.b,{path:"/addstory",component:k}),n.a.createElement(c.b,{path:"/allstory",component:D}),n.a.createElement(c.b,{path:"/storyid/:id",component:N}),n.a.createElement(c.a,{from:"/",to:"/login",exact:!0})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(s.a,null,n.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[168,1,2]]]);
//# sourceMappingURL=main.9831a0a3.chunk.js.map